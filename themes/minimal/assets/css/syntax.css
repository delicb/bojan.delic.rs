/* ==========================================================================
   Syntax Highlighting: Hugo chroma classes, light (github) + dark (dracula)
   ========================================================================== */

/* Shared highlight wrapper styles */
.highlight pre {
  border: 1px solid var(--color-border);
  border-radius: var(--radius);
  padding: 1.25rem;
  overflow-x: auto;
  margin: 1.5rem 0;
  font-size: 0.9rem;
  line-height: 1.6;
}

.highlight code,
.highlight pre code {
  font-family: var(--font-mono);
  background: none;
  padding: 0;
}

/* Chroma — shared structural styles */
.chroma .lnlinks { outline:none;text-decoration:none;color:inherit }
.chroma .lntd { vertical-align:top;padding:0;margin:0;border:0 }
.chroma .lntable { border-spacing:0;padding:0;margin:0;border:0;width:100% }
.chroma .lnt { white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.8em 0 0.4em;color:#7f7f7f;text-align:right }
.chroma .ln { white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.8em 0 0.4em;color:#7f7f7f;text-align:right }
.chroma .line { display:flex }

/* Line number column: no border, subtle separator */
.chroma .lntd:first-child {
  border-right: 1px solid var(--color-border);
}
.chroma .lntd:first-child pre {
  margin: 0;
  border: none;
  padding: 1rem 0 1rem 0.75rem;
}
.chroma .lntd:last-child pre {
  margin: 0;
  border: none;
  padding: 1rem 1rem 1rem 0.75rem;
}
/* When using table line numbers, the outer pre handles the chrome.
   Reset its padding so the table cells control spacing instead. */
.highlight:has(.lntable) pre {
  padding: 0;
}
.highlight .lntable {
  display: table;
  width: 100%;
}
.highlight .lntd {
  display: table-cell;
}
.highlight .lntd:first-child {
  width: 1%;
  min-width: fit-content;
  white-space: nowrap;
}

/* Highlighted lines (.hl) — base styling, colors set per theme below */
.chroma .hl {
  display: flex;
  width: 100%;
  margin-left: -0.25rem;
  margin-right: -0.25rem;
  padding-left: 0.25rem;
  padding-right: 0.25rem;
  border-radius: 2px;
}

/* ---------- Syntax Token Variables ---------- */
/* Light mode tokens (github) — defaults */
:root {
  --syn-bg: #f7f7f7;
  --syn-fg: inherit;
  --syn-hl: #dedede;
  --syn-err-fg: #f6f8fa;   --syn-err-bg: #82071e;
  --syn-keyword: #cf222e;
  --syn-name-attr: #1f2328;
  --syn-name-class: #1f2328;
  --syn-name-const: #0550ae;
  --syn-name-decorator: #0550ae;
  --syn-name-entity: #6639ba;
  --syn-name-label-fg: #900;
  --syn-name-namespace: #24292e;
  --syn-name-other: #1f2328;
  --syn-name-tag: #0550ae;
  --syn-name-builtin: #6639ba;
  --syn-name-builtin-pseudo: #6a737d;
  --syn-name-variable: #953800;
  --syn-name-function: #6639ba;
  --syn-string: #0a3069;
  --syn-string-symbol: #032f62;
  --syn-number: #0550ae;
  --syn-operator: #0550ae;
  --syn-punctuation: #1f2328;
  --syn-comment: #57606a;
  --syn-generic-deleted-fg: #82071e;  --syn-generic-deleted-bg: #ffebe9;
  --syn-generic-emph: #1f2328;
  --syn-generic-inserted-fg: #116329; --syn-generic-inserted-bg: #dafbe1;
  --syn-generic-output: #1f2328;
  --syn-whitespace: #fff;
  /* Dark-only tokens (defaults to light values, overridden in dark) */
  --syn-kd-style: normal;
  --syn-nl-style: normal;
  --syn-nb-style: normal;
  --syn-bp-style: normal;
  --syn-nv-style: normal;
  --syn-nl-label-weight: bold;
  --syn-generic-heading-weight: normal;
  --syn-generic-inserted-weight: normal;
  --syn-generic-subheading-weight: normal;
  --syn-generic-emph-decoration: none;
}

/* Dark mode tokens (dracula) — auto */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --syn-bg: #282a36;
    --syn-fg: #f8f8f2;
    --syn-hl: #3d3f4a;
    --syn-err-fg: #f8f8f2;   --syn-err-bg: transparent;
    --syn-keyword: #ff79c6;
    --syn-name-attr: #50fa7b;
    --syn-name-class: #50fa7b;
    --syn-name-const: #0550ae;
    --syn-name-decorator: #0550ae;
    --syn-name-entity: #6639ba;
    --syn-name-label-fg: #8be9fd;
    --syn-name-namespace: #f8f8f2;
    --syn-name-other: #f8f8f2;
    --syn-name-tag: #ff79c6;
    --syn-name-builtin: #8be9fd;
    --syn-name-builtin-pseudo: #f8f8f2;
    --syn-name-variable: #8be9fd;
    --syn-name-function: #50fa7b;
    --syn-string: #f1fa8c;
    --syn-string-symbol: #f1fa8c;
    --syn-number: #bd93f9;
    --syn-operator: #ff79c6;
    --syn-punctuation: #f8f8f2;
    --syn-comment: #6272a4;
    --syn-generic-deleted-fg: #f55;  --syn-generic-deleted-bg: transparent;
    --syn-generic-emph: inherit;
    --syn-generic-inserted-fg: #50fa7b; --syn-generic-inserted-bg: transparent;
    --syn-generic-output: #44475a;
    --syn-whitespace: #f8f8f2;
    --syn-kd-style: italic;
    --syn-nl-style: italic;
    --syn-nb-style: italic;
    --syn-bp-style: italic;
    --syn-nv-style: italic;
    --syn-nl-label-weight: normal;
    --syn-generic-heading-weight: bold;
    --syn-generic-inserted-weight: bold;
    --syn-generic-subheading-weight: bold;
    --syn-generic-emph-decoration: underline;
  }
}

/* Dark mode tokens (dracula) — manual toggle */
:root[data-theme="dark"] {
  --syn-bg: #282a36;
  --syn-fg: #f8f8f2;
  --syn-hl: #3d3f4a;
  --syn-err-fg: #f8f8f2;   --syn-err-bg: transparent;
  --syn-keyword: #ff79c6;
  --syn-name-attr: #50fa7b;
  --syn-name-class: #50fa7b;
  --syn-name-const: #0550ae;
  --syn-name-decorator: #0550ae;
  --syn-name-entity: #6639ba;
  --syn-name-label-fg: #8be9fd;
  --syn-name-namespace: #f8f8f2;
  --syn-name-other: #f8f8f2;
  --syn-name-tag: #ff79c6;
  --syn-name-builtin: #8be9fd;
  --syn-name-builtin-pseudo: #f8f8f2;
  --syn-name-variable: #8be9fd;
  --syn-name-function: #50fa7b;
  --syn-string: #f1fa8c;
  --syn-string-symbol: #f1fa8c;
  --syn-number: #bd93f9;
  --syn-operator: #ff79c6;
  --syn-punctuation: #f8f8f2;
  --syn-comment: #6272a4;
  --syn-generic-deleted-fg: #f55;  --syn-generic-deleted-bg: transparent;
  --syn-generic-emph: inherit;
  --syn-generic-inserted-fg: #50fa7b; --syn-generic-inserted-bg: transparent;
  --syn-generic-output: #44475a;
  --syn-whitespace: #f8f8f2;
  --syn-kd-style: italic;
  --syn-nl-style: italic;
  --syn-nb-style: italic;
  --syn-bp-style: italic;
  --syn-nv-style: italic;
  --syn-nl-label-weight: normal;
  --syn-generic-heading-weight: bold;
  --syn-generic-inserted-weight: bold;
  --syn-generic-subheading-weight: bold;
  --syn-generic-emph-decoration: underline;
}

/* ---------- Chroma Token Rules (single set, driven by variables) ---------- */
.chroma { color:var(--syn-fg);background-color:var(--syn-bg);-webkit-text-size-adjust:none }
.chroma .hl { background-color:var(--syn-hl) }
.chroma .err { color:var(--syn-err-fg);background-color:var(--syn-err-bg) }

/* Keywords */
.chroma .k { color:var(--syn-keyword) }
.chroma .kc { color:var(--syn-keyword) }
.chroma .kd { color:var(--syn-keyword);font-style:var(--syn-kd-style) }
.chroma .kn { color:var(--syn-keyword) }
.chroma .kp { color:var(--syn-keyword) }
.chroma .kr { color:var(--syn-keyword) }
.chroma .kt { color:var(--syn-keyword) }

/* Names */
.chroma .na { color:var(--syn-name-attr) }
.chroma .nc { color:var(--syn-name-class) }
.chroma .no { color:var(--syn-name-const) }
.chroma .nd { color:var(--syn-name-decorator) }
.chroma .ni { color:var(--syn-name-entity) }
.chroma .nl { color:var(--syn-name-label-fg);font-weight:var(--syn-nl-label-weight);font-style:var(--syn-nl-style) }
.chroma .nn { color:var(--syn-name-namespace) }
.chroma .nx { color:var(--syn-name-other) }
.chroma .nt { color:var(--syn-name-tag) }
.chroma .nb { color:var(--syn-name-builtin);font-style:var(--syn-nb-style) }
.chroma .bp { color:var(--syn-name-builtin-pseudo);font-style:var(--syn-bp-style) }
.chroma .nv { color:var(--syn-name-variable);font-style:var(--syn-nv-style) }
.chroma .vc { color:var(--syn-name-variable);font-style:var(--syn-nv-style) }
.chroma .vg { color:var(--syn-name-variable);font-style:var(--syn-nv-style) }
.chroma .vi { color:var(--syn-name-variable);font-style:var(--syn-nv-style) }
.chroma .vm { color:var(--syn-name-variable);font-style:var(--syn-nv-style) }
.chroma .nf { color:var(--syn-name-function) }
.chroma .fm { color:var(--syn-name-function) }

/* Strings */
.chroma .s { color:var(--syn-string) }
.chroma .sa { color:var(--syn-string) }
.chroma .sb { color:var(--syn-string) }
.chroma .sc { color:var(--syn-string) }
.chroma .dl { color:var(--syn-string) }
.chroma .sd { color:var(--syn-string) }
.chroma .s2 { color:var(--syn-string) }
.chroma .se { color:var(--syn-string) }
.chroma .sh { color:var(--syn-string) }
.chroma .si { color:var(--syn-string) }
.chroma .sx { color:var(--syn-string) }
.chroma .sr { color:var(--syn-string) }
.chroma .s1 { color:var(--syn-string) }
.chroma .ss { color:var(--syn-string-symbol) }

/* Numbers */
.chroma .m { color:var(--syn-number) }
.chroma .mb { color:var(--syn-number) }
.chroma .mf { color:var(--syn-number) }
.chroma .mh { color:var(--syn-number) }
.chroma .mi { color:var(--syn-number) }
.chroma .il { color:var(--syn-number) }
.chroma .mo { color:var(--syn-number) }

/* Operators */
.chroma .o { color:var(--syn-operator) }
.chroma .ow { color:var(--syn-operator) }

/* Punctuation */
.chroma .p { color:var(--syn-punctuation) }

/* Comments */
.chroma .c { color:var(--syn-comment) }
.chroma .ch { color:var(--syn-comment) }
.chroma .cm { color:var(--syn-comment) }
.chroma .c1 { color:var(--syn-comment) }
.chroma .cs { color:var(--syn-comment) }
.chroma .cp { color:var(--syn-comment) }
.chroma .cpf { color:var(--syn-comment) }

/* Generic */
.chroma .gd { color:var(--syn-generic-deleted-fg);background-color:var(--syn-generic-deleted-bg) }
.chroma .ge { color:var(--syn-generic-emph);text-decoration:var(--syn-generic-emph-decoration) }
.chroma .gh { font-weight:var(--syn-generic-heading-weight) }
.chroma .gi { color:var(--syn-generic-inserted-fg);background-color:var(--syn-generic-inserted-bg);font-weight:var(--syn-generic-inserted-weight) }
.chroma .go { color:var(--syn-generic-output) }
.chroma .gu { font-weight:var(--syn-generic-subheading-weight) }
.chroma .gl { text-decoration:underline }
.chroma .w { color:var(--syn-whitespace) }
