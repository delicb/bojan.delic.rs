<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<title>{{ if not .IsHome }}{{ .Title }} Â· {{ end }}{{ .Site.Title }}</title>

{{/* Canonical URL */}}
<link rel="canonical" href="{{ .Permalink }}">

{{/* Favicons */}}
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" href="/favicon.ico">

{{/* RSS */}}
{{ with .OutputFormats.Get "rss" -}}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s">` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end -}}

{{/* Open Graph */}}
<meta property="og:title" content="{{ if not .IsHome }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}">
<meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta property="og:url" content="{{ .Permalink }}">
<meta property="og:site_name" content="{{ .Site.Title }}">
<meta property="og:locale" content="en_US">
{{ if .IsPage -}}
<meta property="og:type" content="article">
{{ with .Date }}<meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Params.tags }}{{ range . }}<meta property="article:tag" content="{{ . }}">{{ end }}{{ end }}
{{- else -}}
<meta property="og:type" content="website">
{{- end }}
{{ $ogImage := "" -}}
{{ with .Resources.GetMatch "cover.*" -}}
  {{ $processed := .Process "fill 1200x630 center jpg q85" -}}
  {{ $ogImage = $processed.Permalink -}}
{{ else -}}
  {{ $ogImage = (printf "%sog-default.jpg" $.Site.BaseURL) -}}
{{ end -}}
<meta property="og:image" content="{{ $ogImage }}">

{{/* Twitter Card */}}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ if not .IsHome }}{{ .Title }}{{ else }}{{ .Site.Title }}{{ end }}">
<meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="twitter:image" content="{{ $ogImage }}">
{{ with .Site.Params.twitterHandle }}<meta name="twitter:site" content="{{ . }}">{{ end }}

{{/* JSON-LD structured data */}}
{{ partial "json-ld.html" . }}

{{/* Styles */}}

{{ $base := resources.Get "css/base.css" }}
{{ $layout := resources.Get "css/layout.css" }}
{{ $article := resources.Get "css/article.css" }}
{{ $sections := resources.Get "css/sections.css" }}
{{ $responsive := resources.Get "css/responsive.css" }}
{{ $syntax := resources.Get "css/syntax.css" }}
{{ $style := slice $base $layout $article $sections $responsive $syntax | resources.Concat "css/style.css" | minify | fingerprint }}
<link rel="stylesheet" href="{{ $style.RelPermalink }}">
<script>
  // Apply saved theme immediately to prevent flash
  (function() {
    var t = localStorage.getItem('theme');
    if (t) document.documentElement.setAttribute('data-theme', t);
    // Suppress transitions during initial paint, then enable
    document.documentElement.classList.add('no-transition');
    requestAnimationFrame(function() {
      requestAnimationFrame(function() {
        document.documentElement.classList.remove('no-transition');
      });
    });
  })();
</script>
