{{- if .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ .Site.Params.jsonLdType | default "Person" }}",
  "name": "{{ .Site.Title }}",
  "url": "{{ .Site.BaseURL }}",
  "description": "{{ .Site.Params.description }}"
  {{- with .Site.Params.socialLinks -}}
    {{- $urls := slice -}}
    {{- range . -}}
      {{- if strings.HasPrefix .url "http" -}}
        {{- $urls = $urls | append .url -}}
      {{- end -}}
    {{- end -}}
    {{- with $urls }},
  "sameAs": [{{ range $i, $url := . }}{{ if $i }},{{ end }}"{{ $url }}"{{ end }}]
    {{- end -}}
  {{- end -}}
}
</script>
{{- else if .IsPage -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
  "url": "{{ .Permalink }}",
  "datePublished": "{{ .Date.Format "2006-01-02" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02" }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Title }}",
    "url": "{{ .Site.BaseURL }}"
  },
  "publisher": {
    "@type": "Person",
    "name": "{{ .Site.Title }}"
  }
  {{- $cover := .Resources.GetMatch "cover.*" -}}
  {{- with $cover -}}
    {{- $processed := .Process "fill 1200x630 center jpg q85" -}},
  "image": "{{ $processed.Permalink }}"
  {{- end }}
  {{- with .Params.tags }},
  "keywords": "{{ delimit . ", " }}"
  {{- end }}
}
</script>
{{- end -}}
