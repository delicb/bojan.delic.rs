{{ define "main" }}
<section class="page-header">
  <h1>{{ .Title }}</h1>
  {{ with .Description }}<p>{{ . }}</p>{{ end }}
</section>

<section class="page-content">
  {{ $resume := .Site.Data.resume }}

  {{ with $resume.summary }}
  <div class="resume-section">
    <h2>Summary</h2>
    <p>{{ . }}</p>
  </div>
  {{ end }}

  <div class="resume-section">
    <h2>Skills</h2>
    <dl class="resume-skills">
      {{ range $resume.skills }}
      <dt>{{ .category }}</dt>
      <dd>{{ .items }}</dd>
      {{ end }}
    </dl>
  </div>

  <div class="resume-section">
    <h2>Experience</h2>
    {{ range $resume.experience }}
    <div class="resume-company">
      <div class="resume-company-header">
        <h3>{{ .company }}</h3>
        {{- $roles := .roles -}}
        {{- $first := index $roles 0 -}}
        {{- $last := index $roles (sub (len $roles) 1) -}}
        <span class="meta">{{ .location }} · {{ partial "tenure.html" (dict "start" $last.start_date "end" $first.end_date) }}</span>
      </div>
      {{ with .description }}<p class="resume-company-desc">{{ . }}</p>{{ end }}
      {{ range .roles }}
      <div class="resume-role">
        <div class="resume-role-header">
          <h4>{{ .title }}</h4>
          <span class="meta">{{ partial "format-period.html" (dict "start" .start_date "end" .end_date) }}</span>
        </div>
        {{ with .highlights }}
        <ul>
          {{ range . }}<li>{{ . }}</li>{{ end }}
        </ul>
        {{ end }}
      </div>
      {{ end }}
    </div>
    {{ end }}
  </div>

  <div class="resume-section">
    <h2>Education</h2>
    {{ range $resume.education }}
    <div class="resume-entry">
      <h3>{{ .degree }}</h3>
      <p class="meta">{{ .school }} · {{ .period }}</p>
      {{ with .description }}<p>{{ . }}</p>{{ end }}
      {{ with .coursework }}<p><strong>Relevant coursework:</strong> {{ . }}</p>{{ end }}
    </div>
    {{ end }}
  </div>

  {{ with $resume.community }}
  <div class="resume-section">
    <h2>Community &amp; Open Source</h2>
    <p>{{ . }}</p>
  </div>
  {{ end }}

</section>
{{ end }}
